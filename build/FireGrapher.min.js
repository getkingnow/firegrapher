var FireGrapher=function(){"use strict";return FireGrapher=function(){},FireGrapher.prototype.graph=function(e,r,i){console.log(e),console.log(r),console.log(i);var o=["grid","line","scatter"];if(-1===o.indexOf(i.type))throw new Error('Invalid chart type. Must be "grid", "line", or "scatter"');this.drawGraph(e);var t=i.path.split("/");console.log(t);var n="/";t.forEach(function(e,o){if("*"===e[0])console.log(o+": individual record");else if("$"===e[0]){console.log(o+": param");var t=e.slice(1);console.log(t),r.child(n).once("value",function(e){e.forEach(function(e){console.log(e.name()),e.ref().on("child_added",function(r){var o=r.val();this.addToD3({line:e.name(),xCoord:o[i.xCoord.value],yCoord:o[i.yCoord.value]})}.bind(this))}.bind(this))}.bind(this))}else console.log(o+": regular node"),n+=e+"/"}.bind(this))},FireGrapher.prototype.addToD3=function(e){"undefined"==typeof this.graphData[e.line]&&(this.graphData[e.line]=[]),this.graphData[e.line][e.xCoord]=e.yCoord;var r=this.graphLines[e.line];"undefined"==typeof r?(console.log("NEW LINE: "+e.line),r=d3.svg.line().x(function(e,r){return this.interpolateXCoord(r)}.bind(this)).y(function(e){return this.interpolateYCoord(e)}.bind(this)).interpolate("basis"),this.graph.append("svg:"+e.line).attr("d",r(this.graphData[e.line])),this.graphLines[e.line]=r):(console.log("UPDATE: "+e.line),this.graph.selectAll(e.line).data([this.graphData[e.line]]).attr("d",r))},FireGrapher.prototype.drawGraph=function(e){var r=800,i=120,o=0,t=30,n=40,a=150;this.graphData={},this.graphLines={},this.interpolateXCoord=d3.scale.linear().domain([o,t]).range([0,r]),this.interpolateYCoord=d3.scale.linear().domain([n,a]).range([0,i]),this.graph=d3.select(e).append("svg:svg").attr("width","100%").attr("height","100%")},FireGrapher}();"undefined"!=typeof module&&(module.exports=FireGrapher);