d>
		<title>D3 using Firebase</title>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/2.10.0/d3.v2.min.js"></script>
		<script type='text/javascript' src='https://cdn.firebase.com/js/client/1.0.15/firebase.js'></script>
		<style>
			/* tell the SVG path to be a thin blue line without any area fill */
			path {
				stroke: steelblue;
				stroke-width: 1;
				fill: none;
			}
		</style>
	</head>
	<body>
		<strong>AAPL</strong>
		<div id="fbgraph1"></div>
		<script>
			function displayFirebaseData(
					graphWidth, graphHeight, 
					minX, maxX, 
					minY, maxY,
					xCoord, yCoord,
					cssSelector,
					path
					) {
				var data = [];
				var x = d3.scale.linear().domain([minX, maxX]).range([0, graphWidth]);
				var y = d3.scale.linear().domain([minY, maxY]).range([0, graphHeight]);

				var graph = d3.select(cssSelector).append("svg:svg").attr("width", "100%").attr("height", "100%");
				var line = d3.svg.line()
					.x(function(d,i) {
						return x(i); 
					})
					.y(function(d,i) {
						return y(d); 
					})
					.interpolate("basis");
				graph.append("svg:path").attr("d", line(data));

				function draw() {
					graph.selectAll("path")
						.data([data])
						.attr("d", line);
				}

				var dataRef = new Firebase(path);
				dataRef.on('child_added', function(snapshot) {
					data[snapshot.val()[xCoord]] = snapshot.val()[yCoord];
					draw();
				});
			}

			var graphWidth = 800;
			var graphHeight = 120;
			var minX = 0, maxX = 30;
			var minY = 50, maxY = 70;
			var cssSelector = "#fbgraph1";
			var path = "https://firegrapherstocks.firebaseio-demo.com/stocks/AAPL";
			var xCoord = "time";
			var yCoord = "price";
			displayFirebaseData(graphWidth, graphHeight, minX, maxX, minY, maxY, xCoord, yCoord, cssSelector, path);
		</script>
	</body>
</html>
